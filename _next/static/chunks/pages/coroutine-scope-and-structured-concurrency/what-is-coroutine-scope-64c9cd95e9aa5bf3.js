(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{6190:function(e,s,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/coroutine-scope-and-structured-concurrency/what-is-coroutine-scope",function(){return o(2161)}])},2161:function(e,s,o){"use strict";o.r(s),o.d(s,{__toc:function(){return a},default:function(){return d}});var n=o(5893),r=o(2673),i=o(373),l=o(8426);o(9128);var c=o(2643),t={src:"/docs-kotlin-coroutine/_next/static/media/uml.e8c54d07.png",height:1017,width:2078,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAEBAMAAABB42PDAAAAJFBMVEX////+/v79/v38/f38/fz7/Pv6/Pr5+/n3+vf2+vf2+ff2+fZCY13VAAAAHElEQVR42mMQcTFgYHDl2pHIUKri4shQPYGBAQAm1gQabh/xnAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4};let a=[{depth:2,value:"CoroutineScope",id:"coroutinescope"},{depth:2,value:"UML - CoroutineScope 와 CoroutineContext 의 연관관계",id:"uml---coroutinescope-와-coroutinecontext-의-연관관계"},{depth:2,value:"CoroutineScope 빌더 함수들",id:"coroutinescope-빌더-함수들"},{depth:2,value:"Coroutine 스코프 생성",id:"coroutine-스코프-생성"},{depth:2,value:"launch",id:"launch"},{depth:2,value:"async",id:"async"},{depth:2,value:"async 코루틴 빌더 내부 살펴보기",id:"async-코루틴-빌더-내부-살펴보기"}];function _createMdxContent(e){let s=Object.assign({h2:"h2",p:"p",code:"code",a:"a",img:"img",ul:"ul",li:"li",pre:"pre",span:"span",blockquote:"blockquote",strong:"strong"},(0,c.a)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h2,{id:"coroutinescope",children:"CoroutineScope"}),"\n",(0,n.jsxs)(s.p,{children:["CoroutineScope 는 Coroutine 의 Scope 를 정의하는 용도의 타입이며 interface 로 선언되어 있습니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(s.p,{children:["structured concurrency 라고 해서 중첩된 Coroutine Scope 를 가질 수도 있는데 여기에 대해서는 이 문서가 아닌 별도의 문서에서 정리하겠습니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(s.p,{children:["CoroutineScope 를 만들때에는 보통 Coroutine Builder 라고 불리는 함수를 사용하는데 대부분 CoroutineScope interface 에 확장함수로 추가된 함수이며 ",(0,n.jsx)(s.code,{children:"withContext()"}),", ",(0,n.jsx)(s.code,{children:"launch()"}),", ",(0,n.jsx)(s.code,{children:"async()"})," 등이 있습니다. ",(0,n.jsx)(s.code,{children:"withContext()"}),", ",(0,n.jsx)(s.code,{children:"launch()"}),", ",(0,n.jsx)(s.code,{children:"async()"})," 확장함수의 정의는 ",(0,n.jsx)(s.a,{href:"https://github.com/Kotlin/kotlinx.coroutines/blob/master/kotlinx-coroutines-core/common/src/Builders.common.kt",children:"Builders.common.kt"})," 에 정의되어 있습니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"uml---coroutinescope-와-coroutinecontext-의-연관관계",children:"UML - CoroutineScope 와 CoroutineContext 의 연관관계"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{placeholder:"blur",src:t})}),"\n",(0,n.jsxs)(s.p,{children:["CoroutineScope 는 내부에 CoroutineContext 를 잡고 움직입니다. 당연하게도, 스코프를 관리하는 데에 있어서 Context(문맥)이 필요하기 때문입니다. 그리고 CorutineScope 는 interface 이기에 직접 객체 생성이 불가능한데, 실제로는 구체타입인 ContextScope 객체로 생성하며, ContextScope 객체를 생성하는 함수는 ",(0,n.jsx)(s.code,{children:"CoroutineScope.kt"})," 내에 CoroutineScope(context) 라는 함수에서 수행합니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(s.p,{children:["코틀린은 특이하게도 interface 안에서 생성자처럼 보일 수 있는 함수들을 선언하고 특정 기본 구현체를 생성하는 객체 생성 함수들을 interface 내에서 제공하도록 구현하는게 관례처럼 되어 있는 라이브러리들이 많습니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(s.p,{children:["이렇게 ContextScope 객체를 만들 때에는 Job 인스턴스가 필요합니다. 당연하게도 코루틴을 구동시키려면 Job 이 필요하겠죠. 이 때 Job 인스턴스는 ",(0,n.jsx)(s.code,{children:"Job.kt"})," 파일 내의 ",(0,n.jsx)(s.code,{children:"Job(CoroutineContext)"})," 함수를 통해 생성합니다. 실제로 내부적으로는 콜 스택을 한 번 더 타서 ",(0,n.jsx)(s.code,{children:"JobSupport.kt"})," 내의 JobImpl(parent) 라는 함수를 통해 실질적인 객체를 생성합니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(s.p,{children:["이렇게 생성한 Job 객체는 이미 CoroutineScope 내에 존재하는 coroutineContext 객체에 병합해둡니다. 여기까지가 CoroutineScope 객체가 생성하는 동안 내부적으로 벌어지는 일 입니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"필요한 내용만 요약해보면 이렇습니다."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"CoroutineScope 내에는 CoroutineContext 정보가 필요한데, 따라서 CoroutineContext 타입에는 항상 멤버 필드 coroutineContext 가 있다."}),"\n",(0,n.jsx)(s.li,{children:"CoroutineScope 는 interface 이기에 구체타입으로 객체를 생성해야 하는데, 내부 구현상으로 기본적으로는 ContextScope 객체를 이용해 CoroutineScope 타입이 생성된다."}),"\n",(0,n.jsxs)(s.li,{children:["ContextScope 라는 구체 타입의 CoroutineScope 가 생성될 때 ",(0,n.jsx)(s.code,{children:"Job"})," 객체를 주입받아서 이것을 멤버 필드인 ",(0,n.jsx)(s.code,{children:"coroutineContext"})," 에 초기화 한다. Job 객체 역시 상위 타입이 CoroutineContext 이기에 coroutineContext 에 저장하는 것이 가능하다."]}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"coroutinescope-빌더-함수들",children:"CoroutineScope 빌더 함수들"}),"\n",(0,n.jsxs)(s.p,{children:["코틀린의 ",(0,n.jsx)(s.code,{children:"kotlinx-coroutines-core"})," 에서는 ",(0,n.jsx)(s.code,{children:"launch"}),", ",(0,n.jsx)(s.code,{children:"async"}),",  ",(0,n.jsx)(s.code,{children:"withContext"}),", ",(0,n.jsx)(s.code,{children:"runBlocking"})," 등과 같은 함수들을 보통 코루틴 빌더 함수라고 부릅니다. 복잡한 CoroutineContext 생성 및 기타 설정들을 직접 작성하지 않고 라이브러리에 내장된 빌더 성격의 함수를 사용하도록 유도한 것입니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(s.p,{children:"잘알려진 코루틴 빌더 함수들은 아래와 같습니다."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"withContext"})," : 코루틴 컨텍스트를 변경하는 함수입니다. 다른 스레드에서 코드를 실행하거나, 특정 디스패처에 작업을 보내는 것이 가능합니다."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"delay"})," : 일정 시간 동안 코루틴을 일시 중단하는 함수입니다. 주로 테스트나 간단한 딜레이를 구현할 때 사용됩니다."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"async"}),": 비동기 작업의 결과를 반환하는 코루틴을 생성합니다. 생성된 코루틴은 ",(0,n.jsx)(s.code,{children:"Deferred"})," 객체를 반환하며, 이를 통해 결과를 가져올 수 있습니다."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"await"}),": Deferred 객체의 결과를 기다리는 함수로, ",(0,n.jsx)(s.code,{children:"async"})," 함수로 생성된 Deferred 객체의 결과를 가져올 때 사용됩니다."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"launch"}),": 백그라운드에서 비동기적으로 새로운 코루틴을 실행하는 함수로, 반환 값이 없는 Fire-and-forget 스타일의 코루틴을 생성합니다."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"runBlocking"}),": 새로운 블록 내에서 코루틴을 실행하는 함수로, 주로 메인 함수나 테스트 코드에서 사용되며, 코루틴을 기다리는 동안 블로킹을 유지합니다."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"coroutineScope"}),": 지정된 블록 내에서 새로운 코루틴 스코프를 생성하는 함수로, 지정된 블록 내의 코루틴이 완료될 때까지 대기합니다."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"select"}),": 여러 개의 중단 가능한 조건을 동시에 처리할 수 있는 함수로, 먼저 발생하는 이벤트를 처리하고 나머지는 무시합니다."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"supervisorScope"}),": 자식 코루틴이 실패하더라도 부모 코루틴이 중단되지 않도록 하는 슈퍼바이저 스코프를 생성하는 함수로, 자식 코루틴의 실패를 격리합니다."]}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsxs)(s.p,{children:["이전문서인 suspend 함수의 개념을 다룬 문서에서 이야기했듯, CoroutineScope 빌더 함수들은 마지막 인자가 람다입니다. 코틀린에서는 마지막 인자가 람다일 경우 함수 인자를 생략하고 ",(0,n.jsx)(s.code,{children:"launch{...}"})," 처럼 표현 가능합니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(s.p,{children:["그래서 대부분의 launch, async 같은 함수들이 함수 인자도 없이 ",(0,n.jsx)(s.code,{children:"{...}"})," 을 사용하는 것입니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(s.h2,{id:"coroutine-스코프-생성",children:"Coroutine 스코프 생성"}),"\n",(0,n.jsxs)(s.p,{children:["코루틴 스코프는 ",(0,n.jsx)(s.code,{children:"launch"}),", ",(0,n.jsx)(s.code,{children:"await"})," , ",(0,n.jsx)(s.code,{children:"coroutineScope"})," 등과 같은 코루틴 빌더를 이용해서 생성할 수도 있겠지만 단순하게 ",(0,n.jsx)(s.code,{children:"CoroutineScope.kt"})," 내에 정의된 ",(0,n.jsx)(s.code,{children:"CoroutineScope"})," 라는 함수를 이용해서도 생성할 수 있습니다."]}),"\n",(0,n.jsx)(s.pre,{"data-language":"kotlin","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"kotlin","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"package"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" io.chagchagchag.demo.kotlin_coroutine.coroutine_scope"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" io.chagchagchag.demo.kotlin_coroutine.helper.logger"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" kotlinx.coroutines.CoroutineScope"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" kotlin.coroutines.EmptyCoroutineContext"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"fun"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"main"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(){"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" log "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"logger"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" coroutineScope "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"CoroutineScope"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(EmptyCoroutineContext)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"방금 생성한 코루틴 스코프 = $coroutineScope"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"코루틴 스코프 클래스 = '}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"${"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"coroutineScope.javaClass.simpleName"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"}"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "})]})}),"\n",(0,n.jsx)(s.p,{children:"출력결과"}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"08:20:37.108 [main] INFO io...helper.LoggingObject -- 방금 생성한 코루틴 스코프 = CoroutineScope(coroutineContext=JobImpl{Active}@6615435c)"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"08:20:37.113 [main] INFO io...helper.LoggingObject -- 코루틴 스코프 클래스 = ContextScope"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Process finished with exit code 0"})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"launch",children:"launch"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"launch{...}"})," 는 CoroutineScope 를 반환합니다. 그리고 Java 의 CompletableFuture 처럼 join() 함수를 사용할 수 있습니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(s.pre,{"data-language":"kotlin","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"kotlin","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"package"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" io.chagchagchag.demo.kotlin_coroutine.coroutine_scope"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" io.chagchagchag.demo.kotlin_coroutine.helper.logger"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" kotlinx.coroutines.*"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" kotlin.coroutines.EmptyCoroutineContext"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"fun"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"main"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(){"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" log "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"logger"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"runBlocking"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" scope "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"CoroutineScope"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(EmptyCoroutineContext)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"scope 에 생성된 Job = '}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"${"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"scope.coroutineContext[Job]"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"}"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"launchedJob 을 시작하겠습니다."'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" launchedJob "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" scope."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"launch"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"delay"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1000"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" currentContext "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"this"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".coroutineContext"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" scopeClassName "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"this"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".javaClass.simpleName"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" currentJob "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"this"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".coroutineContext[Job]"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"this.coroutineContext = $currentContext"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"class name = $scopeClassName"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"현재 Job 의 부모(parent) = '}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"${"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"currentJob?.parent"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"}"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    launchedJob."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"join"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"launchedJob 을 종료합니다."'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "})]})}),"\n",(0,n.jsx)(s.p,{children:"launch 를 통해 CoroutineScope 를 만들고 이 CoroutineScope 가 중지했다가 재개하는 함수의 예제입니다. 부가적으로 CoroutineScope 내에는 무엇이 있는지 확인하기 위해 아래 요소들을 출력해봅니다."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"this.coroutineContext"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"this.javaClass.simpleName"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"this.coroutineContext[Job]"})}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"출력결과"}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"08:42:26.917 [main] INFO io...helper.LoggingObject -- scope 에 생성된 Job = JobImpl{Active}@6f1fba17"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"08:42:26.956 [main] INFO io...helper.LoggingObject -- launchedJob 을 시작하겠습니다."})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"08:42:27.973 [DefaultDispatcher-worker-1] INFO io...helper.LoggingObject -- this.coroutineContext = [StandaloneCoroutine{Active}@41f230d0, Dispatchers.Default]"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"08:42:27.973 [DefaultDispatcher-worker-1] INFO io...helper.LoggingObject -- class name = StandaloneCoroutine"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"08:42:27.973 [DefaultDispatcher-worker-1] INFO io...helper.LoggingObject -- 현재 Job 의 부모(parent) = JobImpl{Active}@6f1fba17"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"08:42:27.974 [main] INFO io...helper.LoggingObject -- launchedJob 을 종료합니다."})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"async",children:"async"}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsx)(s.p,{children:"참고 :"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-scope/",children:"CoroutineScope.async()"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-deferred/",children:"Deferred"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://github.com/Kotlin/kotlinx.coroutines/blob/master/kotlinx-coroutines-core/common/src/Builders.common.kt",children:"AbstractCoroutine"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"async{...}"})," 는 ",(0,n.jsx)(s.a,{href:"https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-deferred/",children:"Deferred"})," 객체를 반환합니다. 이 Deferred 객체는 Job interface 를 extends 하는 interface 입니다. 그리고 ",(0,n.jsx)(s.code,{children:"async{...}"})," 빌더의 내부를 살펴보면 아래와 같이 LazyDeferredCoroutine 또는 DeferredCoroutine 이라는 구체 타입의 인스턴스를 리턴합니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.a,{href:"https://github.com/Kotlin/kotlinx.coroutines/blob/master/kotlinx-coroutines-core/common/src/Builders.common.kt",children:"Builders.common.kt"})})}),"\n",(0,n.jsx)(s.pre,{"data-language":"kotlin","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"kotlin","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"public"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"fun"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"T"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"> "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"CoroutineScope"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"async"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    context: "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"CoroutineContext"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" EmptyCoroutineContext,"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    start: "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"CoroutineStart"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" CoroutineStart.DEFAULT,"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    block: "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"suspend"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"CoroutineScope"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".() "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" T"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"): "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Deferred"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"T"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"> {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" newContext "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"newCoroutineContext"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(context)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" coroutine "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (start.isLazy)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"LazyDeferredCoroutine"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(newContext, block) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"else"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"DeferredCoroutine"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"T"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:">(newContext, active "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    coroutine."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"start"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(start, coroutine, block)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" coroutine"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsxs)(s.p,{children:["이 중 DeferredCoroutine 의 상속관계를 찾아서 위로 올라가면 차례로 ",(0,n.jsx)(s.code,{children:"AbstractCoroutine"})," 클래스, CoroutineScope 클래스를 만나게 됩니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(s.p,{children:["즉, ",(0,n.jsx)(s.code,{children:"async{...}"})," 가 반환하는 ",(0,n.jsx)(s.code,{children:"Deferred"})," 객체는 ",(0,n.jsx)(s.code,{children:"CoroutineScope"})," 로 일반화해서 처리 가능하다는 의미입니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(s.p,{children:["아래는 ",(0,n.jsx)(s.code,{children:"launch{...}"})," 라는 코루틴 빌더의 예제입니다."]}),"\n",(0,n.jsx)(s.pre,{"data-language":"kotlin","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"kotlin","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"package"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" io.chagchagchag.demo.kotlin_coroutine.coroutine_scope"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" io.chagchagchag.demo.kotlin_coroutine.helper.logger"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" kotlinx.coroutines.*"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" kotlin.coroutines.EmptyCoroutineContext"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"fun"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"main"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(){"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" log "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"logger"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"runBlocking"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" scope "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"CoroutineScope"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(EmptyCoroutineContext)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"현재 Job = '}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"${"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"scope.coroutineContext[Job]"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"}"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"시작"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" deferred "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" scope."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"async"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"delay"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1000"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" currentContext "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"this"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".coroutineContext"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" currentContextClassName "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"this"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".javaClass.simpleName"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"val"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" whatIsParent "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"this"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".coroutineContext[Job]?.parent"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"현재 코루틴 컨텍스트 = $currentContext"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"현재 코루틴 컨텍스트의 클래스명 = $currentContextClassName"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"현재 Job 의 부모 = $whatIsParent"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"25000"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"코루틴이 반환한 값 = '}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"${"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"deferred."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"await"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"}"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"끝"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsxs)(s.p,{children:["마치 javascript 의 async, await 을 사용하는 것과 비슷한 코드입니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(s.p,{children:["출력결과를 확인해보면 async 가 생성한 코루틴 컨텍스트는 DeferredCoroutine 입니다. 자신을 생성한 부모 스코프를 참조할 수 있는지 확인하기 위해 ",(0,n.jsx)(s.code,{children:"this.coroutineContext[Job]?.parent"})," 을 출력해보면 정확하게 출력이 됩니다. ",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(s.p,{children:["코루틴 컨텍스트는 자신의 부모스코프가 무엇인지 알수 있다는 사실을 알 수 있습니다. 이것은 자신이 호출된 바로 전 단계의 스코프를 참조할 수 있다는 의미이기 때문에, 조금 복잡한 호출구조의 비동기 프로그래밍을 할 때 중요한 개념이 됩니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(s.p,{children:["중요한 점은 async(), await() 을 하는 동안 프로그램이 블로킹 상태가 아니라는 점입니다. await() 을 하는 동안 코틀린은 내부적으로 다른 코루틴을 조율하면서 실행시키고 있고 async 내부의 작업이 끝나는 순간 await() 을 하는 작업을 완료하게 됩니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"출력결과"}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"09:03:48.916 [main] INFO io...helper.LoggingObject -- 현재 Job = JobImpl{Active}@6f1fba17"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"09:03:48.925 [main] INFO io...helper.LoggingObject -- 시작"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"09:03:49.971 [DefaultDispatcher-worker-1] INFO io...helper.LoggingObject -- 현재 코루틴 컨텍스트 = [DeferredCoroutine{Active}@1b2786cb, Dispatchers.Default]"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"09:03:49.971 [DefaultDispatcher-worker-1] INFO io...helper.LoggingObject -- 현재 코루틴 컨텍스트의 클래스명 = DeferredCoroutine"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"09:03:49.971 [DefaultDispatcher-worker-1] INFO io...helper.LoggingObject -- 현재 Job 의 부모 = JobImpl{Active}@6f1fba17"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"09:03:49.974 [main] INFO io...helper.LoggingObject -- 코루틴이 반환한 값 = 25000"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"09:03:49.975 [main] INFO io...helper.LoggingObject -- 끝"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Process finished with exit code 0"})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"async-코루틴-빌더-내부-살펴보기",children:"async 코루틴 빌더 내부 살펴보기"}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsx)(s.p,{children:"TODO : 다른 작업이 더 우선순위가 높다고 판단해 잠시 스킵"}),"\n"]})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,c.a)(),e.components);return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/coroutine-scope-and-structured-concurrency/what-is-coroutine-scope.mdx",route:"/coroutine-scope-and-structured-concurrency/what-is-coroutine-scope",timestamp:1710723226e3,pageMap:[{kind:"Folder",name:"channel",route:"/channel",children:[{kind:"MdxPage",name:"intro",route:"/channel/intro"},{kind:"Meta",data:{intro:"Intro"}}]},{kind:"Folder",name:"coroutine-context",route:"/coroutine-context",children:[{kind:"MdxPage",name:"coroutine-context-types-features-and-uml",route:"/coroutine-context/coroutine-context-types-features-and-uml"},{kind:"MdxPage",name:"coroutine-exception-handler",route:"/coroutine-context/coroutine-exception-handler"},{kind:"MdxPage",name:"intro",route:"/coroutine-context/intro"},{kind:"MdxPage",name:"what-is-coroutine-context",route:"/coroutine-context/what-is-coroutine-context"},{kind:"Meta",data:{intro:"Intro","what-is-coroutine-context":"CoroutineContext","coroutine-context-types-features-and-uml":"CoroutineContext 의 종류, 특징, UML","coroutine-exception-handler":"CoroutineExceptionHandler"}}]},{kind:"Folder",name:"coroutine-dispatcher",route:"/coroutine-dispatcher",children:[{kind:"MdxPage",name:"intro",route:"/coroutine-dispatcher/intro"},{kind:"MdxPage",name:"what-is-coroutine-dispatcher",route:"/coroutine-dispatcher/what-is-coroutine-dispatcher"},{kind:"Meta",data:{"what-is-coroutine-dispatcher":"CoroutineDispatcer",intro:"Intro"}}]},{kind:"Folder",name:"coroutine-scope-and-structured-concurrency",route:"/coroutine-scope-and-structured-concurrency",children:[{kind:"MdxPage",name:"coroutine-scope-builders",route:"/coroutine-scope-and-structured-concurrency/coroutine-scope-builders"},{kind:"MdxPage",name:"coroutine",route:"/coroutine-scope-and-structured-concurrency/coroutine"},{kind:"MdxPage",name:"intro",route:"/coroutine-scope-and-structured-concurrency/intro"},{kind:"MdxPage",name:"structured-concurrency",route:"/coroutine-scope-and-structured-concurrency/structured-concurrency"},{kind:"MdxPage",name:"what-is-coroutine-scope",route:"/coroutine-scope-and-structured-concurrency/what-is-coroutine-scope"},{kind:"Meta",data:{intro:"Intro","what-is-coroutine-scope":"CoroutineScope","structured-concurrency":"Structured Concurrency","coroutine-scope-builders":"CoroutineScope 빌더 함수들",coroutine:"Coroutine"}}]},{kind:"Folder",name:"coroutine-useful-case",route:"/coroutine-useful-case",children:[{kind:"MdxPage",name:"intro",route:"/coroutine-useful-case/intro"},{kind:"Meta",data:{intro:"Intro"}}]},{kind:"Folder",name:"error-handler-and-job-cancelling",route:"/error-handler-and-job-cancelling",children:[{kind:"MdxPage",name:"intro",route:"/error-handler-and-job-cancelling/intro"},{kind:"Meta",data:{intro:"Intro"}}]},{kind:"Folder",name:"flow",route:"/flow",children:[{kind:"MdxPage",name:"intro",route:"/flow/intro"},{kind:"Meta",data:{intro:"Intro"}}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"kotlin-basic",route:"/kotlin-basic",children:[{kind:"MdxPage",name:"intro",route:"/kotlin-basic/intro"},{kind:"Meta",data:{intro:"Intro"}}]},{kind:"Folder",name:"suspend-and-fsm-cps",route:"/suspend-and-fsm-cps",children:[{kind:"MdxPage",name:"fsm-and-cps",route:"/suspend-and-fsm-cps/fsm-and-cps"},{kind:"MdxPage",name:"to-coroutine",route:"/suspend-and-fsm-cps/to-coroutine"},{kind:"MdxPage",name:"what-is-suspend-function",route:"/suspend-and-fsm-cps/what-is-suspend-function"},{kind:"Meta",data:{"what-is-suspend-function":"suspend 함수","fsm-and-cps":"FSM, CPS","to-coroutine":"코루틴 코드로 바꿔보면"}}]},{kind:"Meta",data:{index:"Introduction","coroutine-useful-case":"코루틴 사용이 더 나은 경우들","suspend-and-fsm-cps":"suspend 함수와 FSM,CPS","coroutine-context":"CoroutineContext","coroutine-dispatcher":"CoroutineDispatcher","coroutine-scope-and-structured-concurrency":"CoroutineScope, Structured Concurrency","error-handler-and-job-cancelling":"ErrorHandler, Job Cancel",flow:"Flow",channel:"Channel","kotlin-basic":"코틀린 기초",contact:{title:"Contact ↗",type:"page",href:"-",newWindow:!0}}}],flexsearch:{codeblocks:!0},title:"What Is Coroutine Scope",headings:a},pageNextRoute:"/coroutine-scope-and-structured-concurrency/what-is-coroutine-scope",nextraLayout:i.ZP,themeConfig:l.Z};var d=(0,r.j)(h)},8426:function(e,s,o){"use strict";var n=o(5893);o(7294);let r={logo:(0,n.jsx)("span",{children:"Docs Kotlin Coroutine"}),project:{link:"https://github.com/chagchagchag/docs-kotlin-coroutine"},docsRepositoryBase:"https://github.com/chagchagchag/docs-kotlin-coroutine",footer:{text:"Nextra Docs Template"}};s.Z=r},5789:function(){}},function(e){e.O(0,[774,796,888,179],function(){return e(e.s=6190)}),_N_E=e.O()}]);