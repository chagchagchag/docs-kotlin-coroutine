(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{6190:function(e,o,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/coroutine-scope-and-structured-concurrency/what-is-coroutine-scope",function(){return n(2161)}])},2161:function(e,o,n){"use strict";n.r(o),n.d(o,{__toc:function(){return a},default:function(){return l}});var t=n(5893),c=n(2673),r=n(373),i=n(8426);n(9128);var u=n(2643),d={src:"/docs-kotlin-coroutine/_next/static/media/uml.e8c54d07.png",height:1017,width:2078,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAEBAMAAABB42PDAAAAJFBMVEX////+/v79/v38/f38/fz7/Pv6/Pr5+/n3+vf2+vf2+ff2+fZCY13VAAAAHElEQVR42mMQcTFgYHDl2pHIUKri4shQPYGBAQAm1gQabh/xnAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4};let a=[{depth:2,value:"CoroutineScope",id:"coroutinescope"},{depth:2,value:"UML - CoroutineScope 와 CoroutineContext 의 연관관계",id:"uml---coroutinescope-와-coroutinecontext-의-연관관계"},{depth:2,value:"CoroutineScope 빌더 함수들",id:"coroutinescope-빌더-함수들"},{depth:2,value:"간단한 예제",id:"간단한-예제"},{depth:2,value:"launch 의 동작",id:"launch-의-동작"},{depth:2,value:"async 의 동작",id:"async-의-동작"}];function _createMdxContent(e){let o=Object.assign({h2:"h2",p:"p",code:"code",a:"a",img:"img",ul:"ul",li:"li"},(0,u.a)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h2,{id:"coroutinescope",children:"CoroutineScope"}),"\n",(0,t.jsx)(o.p,{children:"CoroutineScope 는 Coroutine 의 Scope 를 정의하는 용도의 타입이며 interface 로 선언되어 있습니다."}),"\n",(0,t.jsxs)(o.p,{children:["structured concurrency 라고 해서 중첩된 Coroutine Scope 를 가질 수도 있는데 여기에 대해서는 예제를 통해 정리해봅니다. CoroutineScope 를 만들때에는 보통 Coroutine Builder 라고 불리는 함수를 사용하는데 대부분 CoroutineScope interface 에 확장함수로 추가된 함수이며 ",(0,t.jsx)(o.code,{children:"withContext()"}),", ",(0,t.jsx)(o.code,{children:"launch()"}),", ",(0,t.jsx)(o.code,{children:"async()"})," 등이 있습니다. ",(0,t.jsx)(o.code,{children:"withContext()"}),", ",(0,t.jsx)(o.code,{children:"launch()"}),", ",(0,t.jsx)(o.code,{children:"async()"})," 확장함수의 정의는 ",(0,t.jsx)(o.a,{href:"https://github.com/Kotlin/kotlinx.coroutines/blob/master/kotlinx-coroutines-core/common/src/Builders.common.kt",children:"Builders.common.kt"})," 에 정의되어 있습니다.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(o.h2,{id:"uml---coroutinescope-와-coroutinecontext-의-연관관계",children:"UML - CoroutineScope 와 CoroutineContext 의 연관관계"}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{placeholder:"blur",src:d})}),"\n",(0,t.jsxs)(o.p,{children:["CoroutineScope 는 내부에 CoroutineContext 를 잡고 움직입니다. 당연하게도, 스코프를 관리하는 데에 있어서 Context(문맥)이 필요하기 때문입니다. 그리고 CorutineScope 는 interface 이기에 직접 객체 생성이 불가능한데, 실제로는 구체타입인 ContextScope 객체로 생성하며, ContextScope 객체를 생성하는 함수는 ",(0,t.jsx)(o.code,{children:"CoroutineScope.kt"})," 내에 CoroutineScope(context) 라는 함수에서 수행합니다.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(o.p,{children:["코틀린은 특이하게도 interface 안에서 생성자처럼 보일 수 있는 함수들을 선언하고 특정 기본 구현체를 생성하는 객체 생성 함수들을 interface 내에서 제공하도록 구현하는게 관례처럼 되어 있는 라이브러리들이 많습니다.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(o.p,{children:["이렇게 ContextScope 객체를 만들 때에는 Job 인스턴스가 필요합니다. 당연하게도 코루틴을 구동시키려면 Job 이 필요하겠죠. 이 때 Job 인스턴스는 ",(0,t.jsx)(o.code,{children:"Job.kt"})," 파일 내의 ",(0,t.jsx)(o.code,{children:"Job(CoroutineContext)"})," 함수를 통해 생성합니다. 실제로 내부적으로는 콜 스택을 한 번 더 타서 ",(0,t.jsx)(o.code,{children:"JobSupport.kt"})," 내의 JobImpl(parent) 라는 함수를 통해 실질적인 객체를 생성합니다.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(o.p,{children:"요약해서 필요한 내용만 요약해보면 이렇습니다."}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"CoroutineScope 내에는 CoroutineContext 정보가 필요한데, 따라서 CoroutineContext 타입에는 항상 멤버 필드 coroutineContext 가 있다."}),"\n",(0,t.jsx)(o.li,{children:"CoroutineScope 는 interface 이기에 구체타입으로 객체를 생성해야 하는데, 내부 구현상으로 기본적으로는 ContextScope 객체를 이용해 CoroutineScope 타입이 생성된다."}),"\n",(0,t.jsxs)(o.li,{children:["ContextScope 라는 구체 타입의 CoroutineScope 가 생성될 때 ",(0,t.jsx)(o.code,{children:"Job"})," 객체를 주입받아서 이것을 멤버 필드인 ",(0,t.jsx)(o.code,{children:"coroutineContext"})," 에 초기화 한다. Job 객체 역시 상위 타입이 CoroutineContext 이기에 coroutineContext 에 저장하는 것이 가능하다."]}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(o.h2,{id:"coroutinescope-빌더-함수들",children:"CoroutineScope 빌더 함수들"}),"\n",(0,t.jsx)(o.h2,{id:"간단한-예제",children:"간단한 예제"}),"\n",(0,t.jsx)(o.h2,{id:"launch-의-동작",children:"launch 의 동작"}),"\n",(0,t.jsx)(o.h2,{id:"async-의-동작",children:"async 의 동작"})]})}let s={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:o}=Object.assign({},(0,u.a)(),e.components);return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/coroutine-scope-and-structured-concurrency/what-is-coroutine-scope.mdx",route:"/coroutine-scope-and-structured-concurrency/what-is-coroutine-scope",timestamp:1710687114e3,pageMap:[{kind:"Folder",name:"channel",route:"/channel",children:[{kind:"MdxPage",name:"intro",route:"/channel/intro"},{kind:"Meta",data:{intro:"Intro"}}]},{kind:"Folder",name:"coroutine-context",route:"/coroutine-context",children:[{kind:"MdxPage",name:"coroutine-context-types-features-and-uml",route:"/coroutine-context/coroutine-context-types-features-and-uml"},{kind:"MdxPage",name:"coroutine-exception-handler",route:"/coroutine-context/coroutine-exception-handler"},{kind:"MdxPage",name:"intro",route:"/coroutine-context/intro"},{kind:"MdxPage",name:"what-is-coroutine-context",route:"/coroutine-context/what-is-coroutine-context"},{kind:"Meta",data:{intro:"Intro","what-is-coroutine-context":"CoroutineContext","coroutine-context-types-features-and-uml":"CoroutineContext 의 종류, 특징, UML","coroutine-exception-handler":"CoroutineExceptionHandler"}}]},{kind:"Folder",name:"coroutine-dispatcher",route:"/coroutine-dispatcher",children:[{kind:"MdxPage",name:"intro",route:"/coroutine-dispatcher/intro"},{kind:"MdxPage",name:"what-is-coroutine-dispatcher",route:"/coroutine-dispatcher/what-is-coroutine-dispatcher"},{kind:"Meta",data:{"what-is-coroutine-dispatcher":"CoroutineDispatcer",intro:"Intro"}}]},{kind:"Folder",name:"coroutine-scope-and-structured-concurrency",route:"/coroutine-scope-and-structured-concurrency",children:[{kind:"MdxPage",name:"coroutine",route:"/coroutine-scope-and-structured-concurrency/coroutine"},{kind:"MdxPage",name:"intro",route:"/coroutine-scope-and-structured-concurrency/intro"},{kind:"MdxPage",name:"what-is-coroutine-scope",route:"/coroutine-scope-and-structured-concurrency/what-is-coroutine-scope"},{kind:"Meta",data:{intro:"Intro","what-is-coroutine-scope":"CoroutineScope",coroutine:"Coroutine"}}]},{kind:"Folder",name:"coroutine-useful-case",route:"/coroutine-useful-case",children:[{kind:"MdxPage",name:"intro",route:"/coroutine-useful-case/intro"},{kind:"Meta",data:{intro:"Intro"}}]},{kind:"Folder",name:"flow",route:"/flow",children:[{kind:"MdxPage",name:"intro",route:"/flow/intro"},{kind:"Meta",data:{intro:"Intro"}}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"kotlin-basic",route:"/kotlin-basic",children:[{kind:"MdxPage",name:"intro",route:"/kotlin-basic/intro"},{kind:"Meta",data:{intro:"Intro"}}]},{kind:"Folder",name:"suspend-and-fsm-cps",route:"/suspend-and-fsm-cps",children:[{kind:"MdxPage",name:"fsm-and-cps",route:"/suspend-and-fsm-cps/fsm-and-cps"},{kind:"MdxPage",name:"to-coroutine",route:"/suspend-and-fsm-cps/to-coroutine"},{kind:"MdxPage",name:"what-is-suspend-function",route:"/suspend-and-fsm-cps/what-is-suspend-function"},{kind:"Meta",data:{"what-is-suspend-function":"suspend 함수","fsm-and-cps":"FSM, CPS","to-coroutine":"코루틴 코드로 바꿔보면"}}]},{kind:"Meta",data:{index:"Introduction","coroutine-useful-case":"코루틴 사용이 더 나은 경우들","suspend-and-fsm-cps":"suspend 함수와 FSM,CPS","coroutine-context":"CoroutineContext","coroutine-dispatcher":"CoroutineDispatcher","coroutine-scope-and-structured-concurrency":"CoroutineScope, Structured Concurrency",flow:"Flow",channel:"Channel","kotlin-basic":"코틀린 기초",contact:{title:"Contact ↗",type:"page",href:"-",newWindow:!0}}}],flexsearch:{codeblocks:!0},title:"What Is Coroutine Scope",headings:a},pageNextRoute:"/coroutine-scope-and-structured-concurrency/what-is-coroutine-scope",nextraLayout:r.ZP,themeConfig:i.Z};var l=(0,c.j)(s)},8426:function(e,o,n){"use strict";var t=n(5893);n(7294);let c={logo:(0,t.jsx)("span",{children:"Docs Kotlin Coroutine"}),project:{link:"https://github.com/chagchagchag/docs-kotlin-coroutine"},docsRepositoryBase:"https://github.com/chagchagchag/docs-kotlin-coroutine",footer:{text:"Nextra Docs Template"}};o.Z=c},5789:function(){}},function(e){e.O(0,[774,796,888,179],function(){return e(e.s=6190)}),_N_E=e.O()}]);